def COLOR_MAP = [
    'SUCCESS': 'good',
    'FAILURE': 'danger'
    ]
pipeline {
    agent any
    stages {
        stage('git checkout') {
            steps {
             git 'https://github.com/nithingowdahm87/Java-Springboot.git'
            }
        }
         stage('compile') {
            steps {
              bat 'mvn compile'
            }
        }
        stage('package') {
            steps {
              bat 'mvn install'
            }
        }
         stage('docker build') {
            steps {
             script {
                 withDockerRegistry(credentialsId: 'docker', toolName: 'docker') {
                    bat "docker build -t volumesimage ."
                  }
              }
            }
        }
         stage('docker push') {
            steps {
             script {
                withDockerRegistry(credentialsId: 'docker', toolName: 'docker') {
                    bat "docker run -itd --name volumecontainer -v v2:/sample -p 75:8080 volumesimage"
                  }
              }
            }
         } 
    }	
}
